{% extends "accounts/base.html" %}

{% block title %}Newsroom - {{ block.super }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css">
<style>
  /* Custom styles for the newsroom app */
  .story-content {
    font-family: 'Georgia', serif;
    line-height: 1.6;
  }
  
  .task-priority-urgent {
    color: #ef4444;
  }
  
  .task-priority-high {
    color: #f59e0b;
  }
  
  .task-priority-medium {
    color: #3b82f6;
  }
  
  .task-status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }
  
  .task-status-pending {
    background-color: #f3f4f6;
    color: #4b5563;
  }
  
  .task-status-in-progress {
    background-color: #dbeafe;
    color: #1e40af;
  }
  
  .task-status-review {
    background-color: #fef3c7;
    color: #92400e;
  }
  
  .task-status-completed {
    background-color: #d1fae5;
    color: #047857;
  }
  
  .task-status-cancelled {
    background-color: #fee2e2;
    color: #b91c1c;
  }
  
  .story-status-draft {
    background-color: #f3f4f6;
    color: #4b5563;
  }
  
  .story-status-review {
    background-color: #fef3c7;
    color: #92400e;
  }
  
  .story-status-approved {
    background-color: #e0f2fe;
    color: #0369a1;
  }
  
  .story-status-published {
    background-color: #d1fae5;
    color: #047857;
  }
  
  .story-status-archived {
    background-color: #e5e7eb;
    color: #374151;
  }
  
  .category-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    background-color: #e5e7eb;
    color: #4b5563;
  }
  
  .audio-player {
    width: 100%;
    margin: 0.5rem 0;
  }
  
  .ql-editor {
    min-height: 200px;
  }
</style>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"></script>
<script>
  // Initialize Quill editors if present on the page
  document.addEventListener('DOMContentLoaded', function() {
    const quillElements = document.querySelectorAll('.quill-editor');
    quillElements.forEach(function(element) {
      const quill = new Quill(element, {
        theme: 'snow',
        modules: {
          toolbar: [
            ['bold', 'italic', 'underline', 'strike'],
            [{ 'list': 'ordered'}, { 'list': 'bullet' }],
            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
            [{ 'align': [] }],
            ['clean']
          ]
        }
      });
      
      // Update hidden form field with content when form is submitted
      const form = element.closest('form');
      const hiddenInput = form.querySelector('input[type=hidden][name=' + element.dataset.field + ']');
      
      if (form && hiddenInput) {
        form.addEventListener('submit', function() {
          hiddenInput.value = JSON.stringify(quill.getContents());
        });
        
        // Initialize with content if available
        if (hiddenInput.value) {
          try {
            const content = JSON.parse(hiddenInput.value);
            quill.setContents(content);
          } catch (e) {
            console.error('Error parsing Quill content', e);
          }
        }
      }
    });
  });
</script>
{% endblock %}